{% set page_title_suffix = "タグ・メモ編集" %}
{% set body_class = "page-edit" %}
{# 内部検索系のサブページなので active_page は index 扱い #}
{% set active_page = "index" %}
{% include "_header.html" %}

<main>
    <a href="/" class="back">← 内部検索に戻る</a>

    {% if post %}
        <h1>タグ・メモ編集</h1>

        <div class="post-preview">
            <div class="post-meta">
                スレ：
                <small>{{ post.thread_url }}</small><br>
                {% if post.post_no %}
                    レス #{{ post.post_no }}
                {% else %}
                    ID {{ post.id }}
                {% endif %}
                {% if post.posted_at %}
                    ／ {{ post.posted_at }}
                {% endif %}
            </div>
            <div class="post-body">
                {{ post.body }}
            </div>
        </div>

        <form method="post" action="/post/{{ post.id }}/edit">
            <label for="tags">タグ（カンマ区切りなど自由）：</label>
            <input
                type="text"
                id="tags"
                name="tags"
                value="{{ post.tags or '' }}"
                placeholder="例：重要, 要確認"
            >

            <label for="memo">メモ：</label>
            <textarea
                id="memo"
                name="memo"
                rows="5"
                placeholder="このレス・スレに関する自分用メモを書いてください。"
            >{{ post.memo or '' }}</textarea>

            <button type="submit">保存する</button>
        </form>
    {% else %}
        <p>指定されたレスが見つかりませんでした。</p>
    {% endif %}
</main>
</body>
</html>
