{# templates/_ranking.html #}
<section class="card ranking-card">
    {% if ranking_board_label %}
        <div class="section-title">
            {{ ranking_board_label }} ランキング（爆サイ）
        </div>
    {% else %}
        <div class="section-title">
            ランキング（爆サイ）
        </div>
    {% endif %}

    <p class="ranking-note">
        検索フォームで選択した「板」に対応する爆サイのランキング（おすすめ / 総合アクセス / 急上昇）を表示しています。
    </p>

    {% if ranking_board and ranking_board.error %}
        <p class="error-message">
            ランキング取得中にエラーが発生しました: {{ ranking_board.error }}
        </p>
    {% endif %}

    {% if ranking_board %}
        <div class="ranking-columns">
            {# おすすめ #}
            <div class="ranking-column">
                <div class="ranking-column-title">おすすめ</div>
                {% if ranking_board.osusume %}
                    <ol class="ranking-list">
                        {% for item in ranking_board.osusume %}
                            <li class="ranking-item">
                                <span class="ranking-rank">{{ loop.index }}位</span>
                                <span class="ranking-title">
                                    {% if item.url %}
                                        <a href="{{ item.url }}" target="_blank" rel="nofollow noopener noreferrer">
                                            {{ item.name }}
                                        </a>
                                    {% else %}
                                        {{ item.name }}
                                    {% endif %}
                                </span>
                            </li>
                        {% endfor %}
                    </ol>
                {% else %}
                    <p class="ranking-empty">データがありません。</p>
                {% endif %}
            </div>

            {# 総合アクセス #}
            <div class="ranking-column">
                <div class="ranking-column-title">総合アクセス</div>
                {% if ranking_board.sogo %}
                    <ol class="ranking-list">
                        {% for item in ranking_board.sogo %}
                            <li class="ranking-item">
                                <span class="ranking-rank">{{ loop.index }}位</span>
                                <span class="ranking-title">
                                    {% if item.url %}
                                        <a href="{{ item.url }}" target="_blank" rel="nofollow noopener noreferrer">
                                            {{ item.name }}
                                        </a>
                                    {% else %}
                                        {{ item.name }}
                                    {% endif %}
                                </span>
                            </li>
                        {% endfor %}
                    </ol>
                {% else %}
                    <p class="ranking-empty">データがありません。</p>
                {% endif %}
            </div>

            {# 急上昇 #}
            <div class="ranking-column">
                <div class="ranking-column-title">急上昇</div>
                {% if ranking_board.kyujo %}
                    <ol class="ranking-list">
                        {% for item in ranking_board.kyujo %}
                            <li class="ranking-item">
                                <span class="ranking-rank">{{ loop.index }}位</span>
                                <span class="ranking-title">
                                    {% if item.url %}
                                        <a href="{{ item.url }}" target="_blank" rel="nofollow noopener noreferrer">
                                            {{ item.name }}
                                        </a>
                                    {% else %}
                                        {{ item.name }}
                                    {% endif %}
                                </span>
                            </li>
                        {% endfor %}
                    </ol>
                {% else %}
                    <p class="ranking-empty">データがありません。</p>
                {% endif %}
            </div>
        </div>
    {% else %}
        <p class="ranking-empty">
            ランキングを取得できませんでした。
        </p>
    {% endif %}

    {% if ranking_source_url %}
        <div class="ranking-source-link">
            <a href="{{ ranking_source_url }}" target="_blank" rel="nofollow noopener noreferrer">
                爆サイの元ページを開く
            </a>
        </div>
    {% endif %}
</section>
